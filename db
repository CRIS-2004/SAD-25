CREATE TABLE users (
  id INT(11) NOT NULL AUTO_INCREMENT,
  name VARCHAR(100) DEFAULT NULL,
  email VARCHAR(100) DEFAULT NULL,
  password VARCHAR(255) DEFAULT NULL,
  role ENUM('admin','teacher','student') NOT NULL,
  PRIMARY KEY (id),
  UNIQUE KEY email (email)
);




CREATE TABLE attendance (
  id INT(11) NOT NULL AUTO_INCREMENT,
  student_id INT(11) NOT NULL,
  teacher_id INT(11) NOT NULL,
  date DATE NOT NULL,
  status ENUM('Present','Absent') NOT NULL DEFAULT 'Absent',
  PRIMARY KEY (id),
  KEY student_id (student_id),
  KEY teacher_id (teacher_id),
  CONSTRAINT attendance_ibfk_1 FOREIGN KEY (student_id) REFERENCES users(id) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT attendance_ibfk_2 FOREIGN KEY (teacher_id) REFERENCES users(id) ON DELETE CASCADE ON UPDATE CASCADE
);



$query = "
    SELECT a.date, u1.name AS student, u2.name AS teacher, a.status
    FROM attendance a
    JOIN users u1 ON u1.id = a.student_id
    JOIN users u2 ON u2.id = a.teacher_id
    ORDER BY a.date DESC
";
